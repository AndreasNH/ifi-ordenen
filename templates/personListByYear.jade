extends layout

block prepend title
  | #{page.title} -

block content
  - var years = {};
  - contents.person['structure.json'].metadata.structure.forEach(function (_class) {
  -   _class.members.forEach(function (username) {
  -     var person = contents.person[username]['index.md'].metadata;
  -     years[person.appointed] = years[person.appointed] || [];
  -     person.username = username;
  -     years[person.appointed].push(person);
  -     (person.previous || []).forEach(function (className) {
  -       var previousClass = contents.person[username][className+'.md'].metadata;
  -       years[previousClass.appointed] = years[previousClass.appointed] || [];
  -       years[previousClass.appointed].push(person);
  -     })
  -   })
  - });
  nav
    ul
      each year in Object.keys(years)
        li
          h2= year
          ul.overview
            each person in years[year]
              li
                a(href=locals.url+'/person/' + person.username)
                  img.profile(src=locals.url+'/person/' + person.username + '/thumb.jpg', title=person.title)